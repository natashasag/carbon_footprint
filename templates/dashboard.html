{% extends 'base.html' %}
{% block content %}
<h3>Your recent activity</h3>
<div class="row">
  <div class="col-md-8">
    <table class="table table-striped">
      <thead><tr><th>Date</th><th>CO2 (kg/year)</th><th>Category</th></tr></thead>
      <tbody>
        {% for e in entries %}
          <tr><td>{{ e.date.strftime('%Y-%m-%d') }}</td><td>{{ e.co2_kg }}</td><td><span class="badge {{ 'bg-success' if e.category=='Good Footprint' else 'bg-danger' if e.category=='Dirty Footprint' else 'bg-warning' }}">{{ e.category }}</span></td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-md-4">
    <div class="card p-3 shadow mb-3">
      <h5>Recent logins</h5>
      <ul class="list-unstyled">
        {% for l in recent_logins %}
          <li>{{ l.timestamp.strftime('%Y-%m-%d %H:%M') }} — {{ l.ip_address }} — {% if l.success %}Success{% else %}Failed{% endif %}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="card p-3 shadow">
      <h5>Keep learning</h5>
      <p class="small text-muted">Small changes add up. Try one change this week.</p>
    </div>
  </div>
</div>
{% endblock %}
